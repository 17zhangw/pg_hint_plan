LOAD 'pg_hint_plan';
SET pg_hint_plan.enable TO on;
SET pg_hint_plan.debug_print TO on;
SET client_min_messages TO LOG;
SET search_path TO public;
----
---- No. S-3-1 scan method hint
----
-- No. S-3-1-17
EXPLAIN (COSTS false) SELECT c1 FROM s1.t1 WHERE t1.c1 = 1;
            QUERY PLAN             
-----------------------------------
 Index Only Scan using t1_i1 on t1
   Index Cond: (c1 = 1)
(2 rows)

/*+IndexOnlyScan(t1)*/
EXPLAIN (COSTS false) SELECT c1 FROM s1.t1 WHERE t1.c1 = 1;
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(t1)
not used hint:
duplication hint:
error hint:

            QUERY PLAN             
-----------------------------------
 Index Only Scan using t1_i1 on t1
   Index Cond: (c1 = 1)
(2 rows)

-- No. S-3-1-18
EXPLAIN (COSTS false) SELECT c1 FROM s1.t1 WHERE t1.c1 >= 1;
     QUERY PLAN      
---------------------
 Seq Scan on t1
   Filter: (c1 >= 1)
(2 rows)

/*+IndexOnlyScan(t1)*/
EXPLAIN (COSTS false) SELECT c1 FROM s1.t1 WHERE t1.c1 >= 1;
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(t1)
not used hint:
duplication hint:
error hint:

            QUERY PLAN             
-----------------------------------
 Index Only Scan using t1_i1 on t1
   Index Cond: (c1 >= 1)
(2 rows)

-- No. S-3-1-19
EXPLAIN (COSTS false) SELECT c1 FROM s1.t1 WHERE t1.c1 = 1;
            QUERY PLAN             
-----------------------------------
 Index Only Scan using t1_i1 on t1
   Index Cond: (c1 = 1)
(2 rows)

/*+NoIndexOnlyScan(t1)*/
EXPLAIN (COSTS false) SELECT c1 FROM s1.t1 WHERE t1.c1 = 1;
LOG:  pg_hint_plan:
used hint:
NoIndexOnlyScan(t1)
not used hint:
duplication hint:
error hint:

          QUERY PLAN          
------------------------------
 Index Scan using t1_i1 on t1
   Index Cond: (c1 = 1)
(2 rows)

-- No. S-3-1-20
EXPLAIN (COSTS false) SELECT c1 FROM s1.t1 WHERE t1.c1 >= 1;
     QUERY PLAN      
---------------------
 Seq Scan on t1
   Filter: (c1 >= 1)
(2 rows)

/*+NoIndexOnlyScan(t1)*/
EXPLAIN (COSTS false) SELECT c1 FROM s1.t1 WHERE t1.c1 >= 1;
LOG:  pg_hint_plan:
used hint:
NoIndexOnlyScan(t1)
not used hint:
duplication hint:
error hint:

     QUERY PLAN      
---------------------
 Seq Scan on t1
   Filter: (c1 >= 1)
(2 rows)

----
---- No. S-3-3 index name specified
----
EXPLAIN (COSTS false) SELECT c2 FROM s1.ti1 WHERE ti1.c2 >= 1;
     QUERY PLAN      
---------------------
 Seq Scan on ti1
   Filter: (c2 >= 1)
(2 rows)

-- No. S-3-3-7
/*+IndexOnlyScan(ti1 ti1_i3)*/
EXPLAIN (COSTS false) SELECT c2 FROM s1.ti1 WHERE ti1.c2 >= 1;
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(ti1 ti1_i3)
not used hint:
duplication hint:
error hint:

             QUERY PLAN              
-------------------------------------
 Index Only Scan using ti1_i3 on ti1
   Index Cond: (c2 >= 1)
(2 rows)

-- No. S-3-3-8
/*+IndexOnlyScan(ti1 ti1_i3 ti1_i2)*/
EXPLAIN (COSTS false) SELECT c2 FROM s1.ti1 WHERE ti1.c2 >= 1;
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(ti1 ti1_i3 ti1_i2)
not used hint:
duplication hint:
error hint:

             QUERY PLAN              
-------------------------------------
 Index Only Scan using ti1_i2 on ti1
   Index Cond: (c2 >= 1)
(2 rows)

-- No. S-3-3-9
/*+IndexOnlyScan(ti1 ti1_i4 ti1_i3 ti1_i2 ti1_i1)*/
EXPLAIN (COSTS false) SELECT c2 FROM s1.ti1 WHERE ti1.c2 >= 1;
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(ti1 ti1_i4 ti1_i3 ti1_i2 ti1_i1)
not used hint:
duplication hint:
error hint:

             QUERY PLAN              
-------------------------------------
 Index Only Scan using ti1_i1 on ti1
   Index Cond: (c2 >= 1)
(2 rows)

----
---- No. S-3-4 index type
----
-- No. S-3-4-23
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 >= 1;
     QUERY PLAN      
---------------------
 Seq Scan on ti1
   Filter: (c1 >= 1)
(2 rows)

/*+IndexOnlyScan(ti1 ti1_btree)*/
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 >= 1;
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(ti1 ti1_btree)
not used hint:
duplication hint:
error hint:

               QUERY PLAN               
----------------------------------------
 Index Only Scan using ti1_btree on ti1
   Index Cond: (c1 >= 1)
(2 rows)

-- No. S-3-4-24
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 = 1;
              QUERY PLAN               
---------------------------------------
 Index Only Scan using ti1_uniq on ti1
   Index Cond: (c1 = 1)
(2 rows)

/*+IndexOnlyScan(ti1 ti1_hash)*/
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 = 1;
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(ti1 ti1_hash)
not used hint:
duplication hint:
error hint:

            QUERY PLAN            
----------------------------------
 Index Scan using ti1_hash on ti1
   Index Cond: (c1 = 1)
(2 rows)

-- No. S-3-4-25
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 < 1;
              QUERY PLAN               
---------------------------------------
 Index Only Scan using ti1_uniq on ti1
   Index Cond: (c1 < 1)
(2 rows)

/*+IndexOnlyScan(ti1 ti1_gist)*/
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 < 1;
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(ti1 ti1_gist)
not used hint:
duplication hint:
error hint:

            QUERY PLAN            
----------------------------------
 Index Scan using ti1_gist on ti1
   Index Cond: (c1 < 1)
(2 rows)

-- No. S-3-4-26
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 = 1;
              QUERY PLAN               
---------------------------------------
 Index Only Scan using ti1_uniq on ti1
   Index Cond: (c1 = 1)
(2 rows)

/*+IndexOnlyScan(ti1 ti1_gin)*/
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 = 1;
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(ti1 ti1_gin)
not used hint:
duplication hint:
error hint:

     QUERY PLAN     
--------------------
 Seq Scan on ti1
   Filter: (c1 = 1)
(2 rows)

-- No. S-3-4-27
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 < 100;
              QUERY PLAN               
---------------------------------------
 Index Only Scan using ti1_uniq on ti1
   Index Cond: (c1 < 100)
(2 rows)

/*+IndexOnlyScan(ti1 ti1_expr)*/
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 < 100;
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(ti1 ti1_expr)
not used hint:
duplication hint:
error hint:

            QUERY PLAN             
-----------------------------------
 Index Scan using ti1_expr on ti1
   Index Cond: ((c1 < 100) = true)
   Filter: (c1 < 100)
(3 rows)

-- No. S-3-4-28
EXPLAIN (COSTS false) SELECT c4 FROM s1.ti1 WHERE lower(c4) >= '1';
             QUERY PLAN             
------------------------------------
 Seq Scan on ti1
   Filter: (lower(c4) >= '1'::text)
(2 rows)

/*+IndexOnlyScan(ti1 ti1_pred)*/
EXPLAIN (COSTS false) SELECT c4 FROM s1.ti1 WHERE lower(c4) >= '1';
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(ti1 ti1_pred)
not used hint:
duplication hint:
error hint:

               QUERY PLAN               
----------------------------------------
 Index Scan using ti1_pred on ti1
   Index Cond: (lower(c4) >= '1'::text)
(2 rows)

-- No. S-3-4-29
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 >= 1;
     QUERY PLAN      
---------------------
 Seq Scan on ti1
   Filter: (c1 >= 1)
(2 rows)

/*+IndexOnlyScan(ti1 ti1_uniq)*/
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 >= 1;
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(ti1 ti1_uniq)
not used hint:
duplication hint:
error hint:

              QUERY PLAN               
---------------------------------------
 Index Only Scan using ti1_uniq on ti1
   Index Cond: (c1 >= 1)
(2 rows)

-- No. S-3-4-30
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 >= 1;
     QUERY PLAN      
---------------------
 Seq Scan on ti1
   Filter: (c1 >= 1)
(2 rows)

/*+IndexOnlyScan(ti1 ti1_multi)*/
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 >= 1;
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(ti1 ti1_multi)
not used hint:
duplication hint:
error hint:

               QUERY PLAN               
----------------------------------------
 Index Only Scan using ti1_multi on ti1
   Index Cond: (c1 >= 1)
(2 rows)

-- No. S-3-4-31
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE to_tsvector('english', c4) @@ 'a & b';
                                       QUERY PLAN                                        
-----------------------------------------------------------------------------------------
 Bitmap Heap Scan on ti1
   Recheck Cond: (to_tsvector('english'::regconfig, c4) @@ '''a'' & ''b'''::tsquery)
   ->  Bitmap Index Scan on ti1_ts
         Index Cond: (to_tsvector('english'::regconfig, c4) @@ '''a'' & ''b'''::tsquery)
(4 rows)

/*+IndexOnlyScan(ti1 ti1_ts)*/
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE to_tsvector('english', c4) @@ 'a & b';
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(ti1 ti1_ts)
not used hint:
duplication hint:
error hint:

                                  QUERY PLAN                                   
-------------------------------------------------------------------------------
 Seq Scan on ti1
   Filter: (to_tsvector('english'::regconfig, c4) @@ '''a'' & ''b'''::tsquery)
(2 rows)

-- No. S-3-4-32
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 >= 1;
     QUERY PLAN      
---------------------
 Seq Scan on ti1
   Filter: (c1 >= 1)
(2 rows)

/*+IndexOnlyScan(ti1 ti1_pkey)*/
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 >= 1;
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(ti1 ti1_pkey)
not used hint:
duplication hint:
error hint:

              QUERY PLAN               
---------------------------------------
 Index Only Scan using ti1_pkey on ti1
   Index Cond: (c1 >= 1)
(2 rows)

-- No. S-3-4-33
EXPLAIN (COSTS false) SELECT c2 FROM s1.ti1 WHERE c2 >= 1;
     QUERY PLAN      
---------------------
 Seq Scan on ti1
   Filter: (c2 >= 1)
(2 rows)

/*+IndexOnlyScan(ti1 ti1_c2_key)*/
EXPLAIN (COSTS false) SELECT c2 FROM s1.ti1 WHERE c2 >= 1;
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(ti1 ti1_c2_key)
not used hint:
duplication hint:
error hint:

               QUERY PLAN                
-----------------------------------------
 Index Only Scan using ti1_c2_key on ti1
   Index Cond: (c2 >= 1)
(2 rows)

----
---- No. S-3-5 not used index
----
-- No. S-3-5-3
/*+IndexOnlyScan(ti1 ti1_pred)*/
EXPLAIN (COSTS true) SELECT c1 FROM s1.ti1 WHERE c1 = 100;
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(ti1 ti1_pred)
not used hint:
duplication hint:
error hint:

                              QUERY PLAN                               
-----------------------------------------------------------------------
 Seq Scan on ti1  (cost=10000000000.00..10000000018.50 rows=1 width=4)
   Filter: (c1 = 100)
(2 rows)

----
---- No. S-3-6 not exist index
----
-- No. S-3-6-3
/*+IndexOnlyScan(ti1 not_exist)*/
EXPLAIN (COSTS true) SELECT c1 FROM s1.ti1 WHERE c1 = 100;
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(ti1 not_exist)
not used hint:
duplication hint:
error hint:

                              QUERY PLAN                               
-----------------------------------------------------------------------
 Seq Scan on ti1  (cost=10000000000.00..10000000018.50 rows=1 width=4)
   Filter: (c1 = 100)
(2 rows)

----
---- No. S-3-13 message output
----
-- No. S-3-13-25
/*+IndexOnlyScan(ti1)*/
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 >= 1;
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(ti1)
not used hint:
duplication hint:
error hint:

              QUERY PLAN               
---------------------------------------
 Index Only Scan using ti1_uniq on ti1
   Index Cond: (c1 >= 1)
(2 rows)

-- No. S-3-13-26
/*+IndexOnlyScan(ti1 ti1_pkey)*/
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 >= 1;
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(ti1 ti1_pkey)
not used hint:
duplication hint:
error hint:

              QUERY PLAN               
---------------------------------------
 Index Only Scan using ti1_pkey on ti1
   Index Cond: (c1 >= 1)
(2 rows)

-- No. S-3-13-27
/*+IndexOnlyScan(ti1 ti1_pkey ti1_btree)*/
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 >= 1;
LOG:  pg_hint_plan:
used hint:
IndexOnlyScan(ti1 ti1_pkey ti1_btree)
not used hint:
duplication hint:
error hint:

               QUERY PLAN               
----------------------------------------
 Index Only Scan using ti1_btree on ti1
   Index Cond: (c1 >= 1)
(2 rows)

-- No. S-3-13-28
/*+NoIndexOnlyScan(ti1)*/
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 = 1;
LOG:  pg_hint_plan:
used hint:
NoIndexOnlyScan(ti1)
not used hint:
duplication hint:
error hint:

            QUERY PLAN            
----------------------------------
 Index Scan using ti1_uniq on ti1
   Index Cond: (c1 = 1)
(2 rows)

-- No. S-3-13-29
/*+NoIndexOnlyScan(ti1 ti1_pkey)*/
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 = 1;
INFO:  hint syntax error at or near "ti1_pkey)"
DETAIL:  Closing parenthesis is necessary.
              QUERY PLAN               
---------------------------------------
 Index Only Scan using ti1_uniq on ti1
   Index Cond: (c1 = 1)
(2 rows)

-- No. S-3-13-30
/*+NoIndexOnlyScan(ti1 ti1_pkey ti1_btree)*/
EXPLAIN (COSTS false) SELECT c1 FROM s1.ti1 WHERE c1 = 1;
INFO:  hint syntax error at or near "ti1_pkey ti1_btree)"
DETAIL:  Closing parenthesis is necessary.
              QUERY PLAN               
---------------------------------------
 Index Only Scan using ti1_uniq on ti1
   Index Cond: (c1 = 1)
(2 rows)

